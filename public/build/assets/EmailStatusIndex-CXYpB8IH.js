import{h as x,s as g,x as h,d as o,o as d,a as e,b as i,i as u,Z as p,w as y,t as a,F as r,k as c}from"./app-B_Kj_3rO.js";import{_ as m}from"./AppLayout-5mzGF13c.js";import{C as f}from"./auto-Cz6uSJnr.js";const w={class:"mt-8"},v={__name:"EmailStatusJob",props:{batchesTotal:Number,pendingJobsTotal:Number,failedJobsTotal:Number},setup(l){const n=l,s=x(null);let t=null;const b=()=>{t&&t.destroy(),t=new f(s.value,{type:"bar",data:{labels:["Em lote","Pendentes","Falhas"],datasets:[{label:"Total de Jobs",data:[n.batchesTotal,n.pendingJobsTotal,n.failedJobsTotal],backgroundColor:["#4f46e5","#FBBF24","#EF4444"],borderRadius:8,borderWidth:1}]},options:{indexAxis:"y",responsive:!0,scales:{x:{beginAtZero:!0,ticks:{color:document.documentElement.classList.contains("dark")?"#e5e7eb":"#374151"}},y:{ticks:{color:document.documentElement.classList.contains("dark")?"#e5e7eb":"#374151"}}},plugins:{legend:{display:!1}}}})};return g(()=>{b()}),h(()=>{t&&t.destroy()}),(le,ae)=>(d(),o("div",w,[e("canvas",{ref_key:"chartCanvas",ref:s},null,512)]))}},_={class:"p-6 space-y-8"},k={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},J={class:"bg-white dark:bg-slate-900 border border-gray-200 dark:border-gray-700 shadow-lg rounded-xl p-6 text-center"},T={class:"text-3xl font-bold text-indigo-600 dark:text-indigo-400 mt-2"},E={class:"bg-white dark:bg-slate-900 border border-gray-200 dark:border-gray-700 shadow-lg rounded-xl p-6 text-center"},N={class:"text-3xl font-bold text-yellow-500 dark:text-yellow-400 mt-2"},F={class:"bg-white dark:bg-slate-900 border border-gray-200 dark:border-gray-700 shadow-lg rounded-xl p-6 text-center"},S={class:"text-3xl font-bold text-red-600 dark:text-red-500 mt-2"},C={class:"flex items-center flex-wrap bg-white border border-gray-300 shadow-lg rounded-md p-4"},A={class:"lg:w-2/3 w-4/5"},D={class:"bg-white border border-gray-200 shadow rounded-xl p-6 mb-8"},B={key:0,class:"text-gray-500"},L={key:1,class:"overflow-x-auto"},I={class:"min-w-full text-sm text-gray-800"},P={class:"py-2 px-4"},R={class:"py-2 px-4 hidden lg:table-cell"},U={class:"py-2 px-4 break-all hidden lg:table-cell"},$={class:"bg-white border border-red-200 shadow rounded-xl p-6 mb-8"},M={key:0,class:"text-gray-500"},V={key:1,class:"overflow-x-auto"},Z={class:"min-w-full text-sm text-gray-800"},q={class:"py-2 px-4"},H={class:"py-2 px-4 hidden lg:table-cell"},O={class:"py-2 px-4 hidden lg:table-cell"},W={class:"py-2 px-4 hidden lg:table-cell"},j={class:"py-2 px-4"},z={class:"py-2 px-4 break-all hidden lg:table-cell"},G={class:"bg-white border border-gray-200 shadow rounded-xl p-6"},K={key:0,class:"text-gray-500"},Q={key:1,class:"overflow-x-auto"},X={class:"min-w-full text-sm text-gray-800"},Y={class:"py-2 px-4"},ee={class:"py-2 px-4 hidden lg:table-cell"},te={class:"py-2 px-4 hidden lg:table-cell"},se={class:"py-2 px-4 hidden lg:table-cell"},re={__name:"EmailStatusIndex",props:{pendingJobs:Array,failedJobs:Array,batches:Array,pendingJobsTotal:Number,failedJobsTotal:Number,batchesTotal:Number,success:String,error:String},setup(l){return(n,s)=>(d(),o(r,null,[i(u(p),{title:"Status dos E-mails"}),i(m,{success:l.success,error:l.error},{default:y(()=>[e("div",_,[e("div",k,[e("div",J,[s[0]||(s[0]=e("p",{class:"text-sm text-gray-500 dark:text-gray-300 font-medium"},"EM LOTES",-1)),e("p",T,a(l.batchesTotal),1)]),e("div",E,[s[1]||(s[1]=e("p",{class:"text-sm text-gray-500 dark:text-gray-300 font-medium"},"PENDENTES",-1)),e("p",N,a(l.pendingJobsTotal),1)]),e("div",F,[s[2]||(s[2]=e("p",{class:"text-sm text-gray-500 dark:text-gray-300 font-medium"},"FALHAS",-1)),e("p",S,a(l.failedJobsTotal),1)])]),e("div",C,[e("div",A,[i(v,{class:"lg:w-full mx-auto",batchesTotal:l.batchesTotal,pendingJobsTotal:l.pendingJobsTotal,failedJobsTotal:l.failedJobsTotal,batches:l.batches,pending:l.pendingJobs,failed:l.failedJobs},null,8,["batchesTotal","pendingJobsTotal","failedJobsTotal","batches","pending","failed"])]),s[3]||(s[3]=e("div",{class:"space-y-4 lg:w-1/3 w-full"},[e("div",{class:"p-4 bg-white dark:bg-slate-900 border border-gray-200 dark:border-gray-700 rounded-lg shadow"},[e("h3",{class:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-2"},"Pendentes"),e("p",{class:"text-gray-500 text-sm mb-3"},"Escolha entre reenviar os lotes pendentes ou excluí-los."),e("div",{class:"flex flex-wrap gap-2"},[e("button",{class:"bg-yellow-500 hover:bg-yellow-600 text-white font-medium py-2 px-4 rounded transition duration-200","aria-label":"Reenviar pendentes"}," Reenviar "),e("button",{class:"bg-red-500 hover:bg-red-600 text-white font-medium py-2 px-4 rounded transition duration-200","aria-label":"Excluir pendentes"}," Excluir ")])]),e("div",{class:"p-4 bg-white dark:bg-slate-900 border border-gray-200 dark:border-gray-700 rounded-lg shadow"},[e("h3",{class:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-2"},"Falhas"),e("p",{class:"text-gray-500 text-sm mb-3"},"Escolha entre reenviar os lotes com falha ou excluí-los."),e("div",{class:"flex flex-wrap gap-2"},[e("button",{class:"bg-yellow-500 hover:bg-yellow-600 text-white font-medium py-2 px-4 rounded transition duration-200","aria-label":"Reenviar falhas"}," Reenviar "),e("button",{class:"bg-red-500 hover:bg-red-600 text-white font-medium py-2 px-4 rounded transition duration-200","aria-label":"Excluir falhas"}," Excluir ")])])],-1))]),e("div",D,[s[5]||(s[5]=e("h2",{class:"text-2xl font-bold mb-4 text-gray-800"},"Tarefas Pendentes",-1)),l.pendingJobs.length?(d(),o("div",L,[e("table",I,[s[4]||(s[4]=e("thead",{class:"bg-gray-100"},[e("tr",null,[e("th",{class:"text-left py-3 px-4 font-semibold"},"ID"),e("th",{class:"text-left py-3 px-4 font-semibold hidden lg:table-cell"},"Fila"),e("th",{class:"text-left py-3 px-4 font-semibold hidden lg:table-cell"},"Dados")])],-1)),e("tbody",null,[(d(!0),o(r,null,c(l.pendingJobs,t=>(d(),o("tr",{key:t.id,class:"border-t"},[e("td",P,a(t.id),1),e("td",R,a(t.queue),1),e("td",U,a(t.payload.substring(0,100)+(t.payload.length>100?"...":"")),1)]))),128))])])])):(d(),o("div",B,"Nenhuma tarefa pendente."))]),e("div",$,[s[7]||(s[7]=e("h2",{class:"text-2xl font-bold mb-4 text-red-600"},"Falhas nos E-mails",-1)),l.failedJobs.length?(d(),o("div",V,[e("table",Z,[s[6]||(s[6]=e("thead",{class:"bg-red-50"},[e("tr",null,[e("th",{class:"text-left py-3 px-4 font-semibold"},"ID"),e("th",{class:"text-left py-3 px-4 font-semibold hidden lg:table-cell"},"UUID"),e("th",{class:"text-left py-3 px-4 font-semibold hidden lg:table-cell"},"Job"),e("th",{class:"text-left py-3 px-4 font-semibold hidden lg:table-cell"},"Classe"),e("th",{class:"text-left py-3 px-4 font-semibold"},"Falhou em"),e("th",{class:"text-left py-3 px-4 font-semibold hidden lg:table-cell"},"Falha principal")])],-1)),e("tbody",null,[(d(!0),o(r,null,c(l.failedJobs,t=>(d(),o("tr",{key:t.id,class:"border-t align-top"},[e("td",q,a(t.id),1),e("td",H,a(t.uuid),1),e("td",O,a(t.jobName||"Desconhecido"),1),e("td",W,a(t.displayName),1),e("td",j,a(t.failed_at),1),e("td",z,a(t.exception?t.exception.split(`
`)[0]:"Não especificado"),1)]))),128))])])])):(d(),o("div",M,"Nenhuma falha registrada."))]),e("div",G,[s[9]||(s[9]=e("h2",{class:"text-2xl font-bold mb-4 text-gray-800"},"Lotes de Envio",-1)),l.batches.length?(d(),o("div",Q,[e("table",X,[s[8]||(s[8]=e("thead",{class:"bg-gray-100"},[e("tr",null,[e("th",{class:"text-left py-3 px-4 font-semibold"},"Nome"),e("th",{class:"text-left py-3 px-4 font-semibold hidden lg:table-cell"},"Total de Jobs"),e("th",{class:"text-left py-3 px-4 font-semibold hidden lg:table-cell"},"Pendentes"),e("th",{class:"text-left py-3 px-4 font-semibold hidden lg:table-cell"},"Falhas")])],-1)),e("tbody",null,[(d(!0),o(r,null,c(l.batches,t=>(d(),o("tr",{key:t.id,class:"border-t"},[e("td",Y,a(t.name),1),e("td",ee,a(t.total_jobs),1),e("td",te,a(t.pending_jobs),1),e("td",se,a(t.failed_jobs),1)]))),128))])])])):(d(),o("div",K,"Nenhum lote encontrado."))])])]),_:1},8,["success","error"])],64))}};export{re as default};
