import{T as j,h as f,d as n,o as u,a as e,b as d,G as C,f as m,g as w,i as s,m as p,p as _,j as v,w as k,q as I,H as A,N as F}from"./app-DEkwZWrq.js";import{_ as U}from"./ActionMessage-Dd9AVkuP.js";import{_ as g}from"./InputError-hNK4lZzv.js";const B={class:"bg-white shadow-md border border-gray-200 p-6 w-full mx-auto"},E={class:"flex items-center flex-wrap justify-center gap-6"},R={class:"w-full"},T={class:"relative group w-20 mx-auto"},q={class:"w-20 h-20 rounded-full border-2 border-indigo-200 overflow-hidden shadow-sm transition"},L=["src","alt"],$={class:"w-full flex flex-col gap-1"},z={class:"grid grid-cols-1 lg:grid-cols-2 gap-4"},D={key:0,class:"mt-2 text-sm text-gray-600"},M={class:"mt-1 text-green-600"},G={class:"flex justify-end items-center gap-4"},H=["disabled"],Q={__name:"UpdateProfileInformationForm",props:{user:Object},setup(a){const x=a,o=j({_method:"PUT",name:x.user.name,email:x.user.email,photo:null}),h=f(null),c=f(null),r=f(null),S=()=>{r.value&&(o.photo=r.value.files[0]),o.post(route("user-profile-information.update"),{errorBag:"updateProfileInformation",preserveScroll:!0,onSuccess:()=>y()})},P=()=>{h.value=!0},b=()=>{r.value.click()},N=()=>{const l=r.value.files[0];if(!l)return;const t=new FileReader;t.onload=i=>{c.value=i.target.result},t.readAsDataURL(l)},V=()=>{F.delete(route("current-user-photo.destroy"),{preserveScroll:!0,onSuccess:()=>{c.value=null,y()}})},y=()=>{var l;(l=r.value)!=null&&l.value&&(r.value.value=null)};return(l,t)=>(u(),n("section",B,[t[8]||(t[8]=e("header",{class:"mb-6 text-center"},[e("h2",{class:"text-xl font-bold text-gray-800"},"Informações do Perfil"),e("p",{class:"text-sm text-gray-500 mt-1"}," Atualize seu nome e e-mail. É rápido e fácil. ")],-1)),e("form",{onSubmit:m(S,["prevent"]),class:"space-y-6"},[e("div",E,[e("div",R,[e("div",T,[e("div",q,[c.value?(u(),n("div",{key:1,class:"w-full h-full bg-cover bg-center",style:C("background-image: url("+c.value+")")},null,4)):(u(),n("img",{key:0,src:"/storage/"+a.user.profile_photo_path,alt:a.user.name,class:"w-full h-full object-cover"},null,8,L))]),e("div",{class:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 flex items-center justify-center transition rounded-full cursor-pointer",onClick:m(b,["prevent"])},t[2]||(t[2]=[e("span",{class:"text-white text-xs font-semibold"},"Alterar",-1)]))])]),e("input",{id:"photo",ref_key:"photoInput",ref:r,type:"file",class:"hidden",onChange:N},null,544),e("div",$,[e("button",{type:"button",class:"text-sm text-indigo-600 hover:text-indigo-800 font-medium",onClick:m(b,["prevent"])}," Selecionar Nova Foto "),a.user.profile_photo_path?(u(),n("button",{key:0,type:"button",class:"text-sm text-red-600 hover:text-red-700 font-medium",onClick:m(V,["prevent"])}," Remover Foto ")):w("",!0)])]),d(g,{message:s(o).errors.photo,class:"text-xs text-red-500"},null,8,["message"]),e("div",z,[e("div",null,[t[3]||(t[3]=e("label",{for:"name",class:"block text-sm font-medium text-gray-700 mb-1"},"Nome",-1)),p(e("input",{id:"name","onUpdate:modelValue":t[0]||(t[0]=i=>s(o).name=i),type:"text",class:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 focus:outline-none",required:"",autocomplete:"name"},null,512),[[_,s(o).name]]),d(g,{message:s(o).errors.name,class:"mt-1 text-xs text-red-500"},null,8,["message"])]),e("div",null,[t[6]||(t[6]=e("label",{for:"email",class:"block text-sm font-medium text-gray-700 mb-1"},"E-mail",-1)),p(e("input",{id:"email","onUpdate:modelValue":t[1]||(t[1]=i=>s(o).email=i),type:"email",class:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 focus:outline-none",required:"",autocomplete:"username"},null,512),[[_,s(o).email]]),d(g,{message:s(o).errors.email,class:"mt-1 text-xs text-red-500"},null,8,["message"]),l.$page.props.jetstream.hasEmailVerification&&a.user.email_verified_at===null?(u(),n("div",D,[t[5]||(t[5]=v(" Seu e-mail ainda não foi verificado. ")),d(s(I),{href:l.route("verification.send"),method:"post",as:"button",class:"ml-1 text-indigo-600 hover:underline",onClick:m(P,["prevent"])},{default:k(()=>t[4]||(t[4]=[v(" Reenviar verificação ")])),_:1},8,["href"]),p(e("div",M," Link de verificação enviado. ",512),[[A,h.value]])])):w("",!0)])]),e("div",G,[d(U,{on:s(o).recentlySuccessful,class:"text-sm text-green-600"},{default:k(()=>t[7]||(t[7]=[v(" Alterações salvas com sucesso. ")])),_:1},8,["on"]),e("button",{type:"submit",disabled:s(o).processing,class:"bg-indigo-600 hover:bg-indigo-700 text-white text-sm px-5 py-2 rounded-md transition disabled:opacity-50"}," Salvar Alterações ",8,H)])],32)]))}};export{Q as default};
